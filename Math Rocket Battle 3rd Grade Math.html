<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Rocket Battle</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background: linear-gradient(to bottom, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
        }

        .player-info {
            text-align: center;
            flex: 1;
        }

        .player-name {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .rockets-count {
            font-size: 1.2rem;
            color: #ffcc00;
        }

        .game-area {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            position: relative;
            height: 400px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
        }

        .player-area {
            width: 45%;
            height: 100%;
            position: relative;
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 10px;
        }

        .player1-area {
            background: rgba(0, 100, 255, 0.2);
        }

        .player2-area {
            background: rgba(255, 0, 100, 0.2);
        }

        .base, .monster, .zombie {
            position: absolute;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }

        .base {
            width: 100px;
            height: 100px;
            bottom: 20px;
        }

        .player1-base {
            left: 50px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect x="20" y="40" width="60" height="40" fill="%230070C0" stroke="%23005090" stroke-width="2"/><rect x="30" y="20" width="40" height="20" fill="%230070C0" stroke="%23005090" stroke-width="2"/><rect x="40" y="60" width="20" height="20" fill="%23005090"/></svg>');
        }

        .player2-base {
            right: 50px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect x="20" y="40" width="60" height="40" fill="%23C00070" stroke="%23900050" stroke-width="2"/><rect x="30" y="20" width="40" height="20" fill="%23C00070" stroke="%23900050" stroke-width="2"/><rect x="40" y="60" width="20" height="20" fill="%23900050"/></svg>');
        }

        .monster {
            width: 80px;
            height: 80px;
            bottom: 130px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%2333AA33" stroke="%23228822" stroke-width="2"/><circle cx="35" cy="40" r="8" fill="black"/><circle cx="65" cy="40" r="8" fill="black"/><path d="M 30 65 Q 50 80 70 65" stroke="black" stroke-width="3" fill="none"/></svg>');
        }

        .player1-monster {
            left: 80px;
        }

        .player2-monster {
            right: 80px;
        }

        .zombie {
            width: 60px;
            height: 60px;
            bottom: 220px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="40" r="30" fill="%23707070" stroke="%23505050" stroke-width="2"/><circle cx="40" cy="30" r="5" fill="black"/><circle cx="60" cy="30" r="5" fill="black"/><rect x="35" y="45" width="30" height="10" fill="black"/><rect x="40" y="70" width="5" height="20" fill="%23505050"/><rect x="55" y="70" width="5" height="20" fill="%23505050"/></svg>');
        }

        .player1-zombie1 { left: 30px; }
        .player1-zombie2 { left: 110px; }
        .player1-zombie3 { left: 190px; }

        .player2-zombie1 { right: 30px; }
        .player2-zombie2 { right: 110px; }
        .player2-zombie3 { right: 190px; }

        .rocket {
            position: absolute;
            width: 20px;
            height: 40px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 40"><polygon points="10,0 0,40 20,40" fill="%23FF9900"/><rect x="8" y="10" width="4" height="25" fill="%23FFCC00"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            z-index: 10;
            display: none;
        }

        .question-area {
            background: rgba(0, 0, 0, 0.5);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .question-text {
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .answer-options {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .answer-btn {
            background: #4a90e2;
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .answer-btn:hover {
            background: #3a80d2;
            transform: scale(1.05);
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .fire-btn {
            background: #ff5722;
            color: white;
        }

        .fire-btn:hover:not(:disabled) {
            background: #e64a19;
            transform: scale(1.05);
        }

        .fire-btn:disabled {
            background: #777;
            cursor: not-allowed;
        }

        .new-game-btn {
            background: #4caf50;
            color: white;
        }

        .new-game-btn:hover {
            background: #45a049;
            transform: scale(1.05);
        }

        .game-over {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            display: none;
        }

        .game-over-message {
            font-size: 3rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .explosion {
            position: absolute;
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, #ff9900, #ff0000);
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
            z-index: 5;
        }

        @keyframes explode {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
        }

        .instructions {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Math Rocket Battle 3rd Grade Math</h1>
            <p>Math Made Fun by Titan Business Pros LLC!</p>
        </header>

        <div class="game-info">
            <div class="player-info">
                <div class="player-name">Player 1</div>
                <div class="rockets-count">Rockets: <span id="player1-rockets">0</span></div>
            </div>
            <div class="player-info">
                <div class="player-name">Player 2</div>
                <div class="rockets-count">Rockets: <span id="player2-rockets">0</span></div>
            </div>
        </div>

        <div class="game-area">
            <div class="player-area player1-area">
                <div class="base player1-base" id="player1-base"></div>
                <div class="monster player1-monster" id="player1-monster"></div>
                <div class="zombie player1-zombie1" id="player1-zombie1"></div>
                <div class="zombie player1-zombie2" id="player1-zombie2"></div>
                <div class="zombie player1-zombie3" id="player1-zombie3"></div>
            </div>
            <div class="player-area player2-area">
                <div class="base player2-base" id="player2-base"></div>
                <div class="monster player2-monster" id="player2-monster"></div>
                <div class="zombie player2-zombie1" id="player2-zombie1"></div>
                <div class="zombie player2-zombie2" id="player2-zombie2"></div>
                <div class="zombie player2-zombie3" id="player2-zombie3"></div>
            </div>
            <div class="rocket" id="rocket"></div>
        </div>

        <div class="question-area">
            <div class="question-text" id="question-text">Solve the math problem to earn a rocket!</div>
            <div class="answer-options" id="answer-options">
                <!-- Answer buttons will be generated here -->
            </div>
            <div class="controls">
                <button class="fire-btn" id="fire-btn" disabled>Launch Rocket!</button>
                <button class="new-game-btn" id="new-game-btn">New Game</button>
            </div>
        </div>

        <div class="instructions">
            <h3>How to Play:</h3>
            <p>1. Answer math questions correctly to earn rockets</p>
            <p>2. Click "Launch Rocket!" and then click where you want to aim in the opponent's area</p>
            <p>3. Destroy all of your opponent's base, monster, and zombies to win!</p>
        </div>

        <div class="game-over" id="game-over">
            <div class="game-over-message" id="game-over-message"></div>
            <button class="new-game-btn" id="restart-btn">Play Again</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Game state
            const gameState = {
                currentPlayer: 1,
                player1: {
                    rockets: 0,
                    base: true,
                    monster: true,
                    zombies: [true, true, true]
                },
                player2: {
                    rockets: 0,
                    base: true,
                    monster: true,
                    zombies: [true, true, true]
                },
                gameActive: true,
                canFire: false
            };

            // DOM elements
            const questionText = document.getElementById('question-text');
            const answerOptions = document.getElementById('answer-options');
            const fireBtn = document.getElementById('fire-btn');
            const newGameBtn = document.getElementById('new-game-btn');
            const restartBtn = document.getElementById('restart-btn');
            const gameOver = document.getElementById('game-over');
            const gameOverMessage = document.getElementById('game-over-message');
            const rocket = document.getElementById('rocket');
            const player1Rockets = document.getElementById('player1-rockets');
            const player2Rockets = document.getElementById('player2-rockets');

            // Generate a math question
            function generateQuestion() {
                const operations = ['+', '-', '*'];
                const operation = operations[Math.floor(Math.random() * operations.length)];
                
                let num1, num2, answer;
                
                switch(operation) {
                    case '+':
                        num1 = Math.floor(Math.random() * 50) + 1;
                        num2 = Math.floor(Math.random() * 50) + 1;
                        answer = num1 + num2;
                        break;
                    case '-':
                        num1 = Math.floor(Math.random() * 100) + 1;
                        num2 = Math.floor(Math.random() * num1) + 1;
                        answer = num1 - num2;
                        break;
                    case '*':
                        num1 = Math.floor(Math.random() * 12) + 1;
                        num2 = Math.floor(Math.random() * 12) + 1;
                        answer = num1 * num2;
                        break;
                }
                
                const question = `${num1} ${operation} ${num2}`;
                
                // Generate wrong answers
                const answers = [answer];
                while(answers.length < 4) {
                    let wrongAnswer;
                    if(operation === '*') {
                        wrongAnswer = Math.floor(Math.random() * 144) + 1;
                    } else {
                        wrongAnswer = Math.floor(Math.random() * 100) + 1;
                    }
                    
                    if(!answers.includes(wrongAnswer) && wrongAnswer !== answer) {
                        answers.push(wrongAnswer);
                    }
                }
                
                // Shuffle answers
                for(let i = answers.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [answers[i], answers[j]] = [answers[j], answers[i]];
                }
                
                return {
                    question: question,
                    answers: answers,
                    correctAnswer: answer
                };
            }

            // Display question
            function displayQuestion() {
                const questionData = generateQuestion();
                questionText.textContent = `Player ${gameState.currentPlayer}: What is ${questionData.question}?`;
                
                answerOptions.innerHTML = '';
                questionData.answers.forEach(answer => {
                    const button = document.createElement('button');
                    button.className = 'answer-btn';
                    button.textContent = answer;
                    button.addEventListener('click', function() {
                        checkAnswer(answer, questionData.correctAnswer);
                    });
                    answerOptions.appendChild(button);
                });
            }

            // Check answer
            function checkAnswer(selectedAnswer, correctAnswer) {
                if(!gameState.gameActive) return;
                
                if(parseInt(selectedAnswer) === correctAnswer) {
                    // Correct answer
                    if(gameState.currentPlayer === 1) {
                        gameState.player1.rockets++;
                        player1Rockets.textContent = gameState.player1.rockets;
                    } else {
                        gameState.player2.rockets++;
                        player2Rockets.textContent = gameState.player2.rockets;
                    }
                    
                    fireBtn.disabled = false;
                    gameState.canFire = true;
                    questionText.textContent = `Correct! You earned a rocket. Click "Launch Rocket!" then aim and click in the opponent's area.`;
                } else {
                    // Wrong answer
                    questionText.textContent = `Incorrect! The answer was ${correctAnswer}. Try again.`;
                    setTimeout(displayQuestion, 2000);
                }
            }

            // Fire rocket
            function fireRocket() {
                if(!gameState.canFire || !gameState.gameActive) return;
                
                fireBtn.disabled = true;
                gameState.canFire = false;
                
                // Set up rocket firing
                questionText.textContent = `Player ${gameState.currentPlayer}: Click in the opponent's area to aim your rocket!`;
                
                const opponentArea = gameState.currentPlayer === 1 ? 
                    document.querySelector('.player2-area') : 
                    document.querySelector('.player1-area');
                
                function aimRocket(e) {
                    if(!gameState.gameActive) return;
                    
                    const rect = opponentArea.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    // Launch rocket animation
                    launchRocket(x, y, opponentArea);
                    
                    // Remove event listener after firing
                    opponentArea.removeEventListener('click', aimRocket);
                }
                
                opponentArea.addEventListener('click', aimRocket);
            }

            // Launch rocket animation
            function launchRocket(targetX, targetY, targetArea) {
                const rocket = document.getElementById('rocket');
                
                // Position rocket at the bottom center of the current player's area
                const playerArea = gameState.currentPlayer === 1 ? 
                    document.querySelector('.player1-area') : 
                    document.querySelector('.player2-area');
                    
                const playerRect = playerArea.getBoundingClientRect();
                const startX = playerRect.width / 2;
                const startY = playerRect.height;
                
                // Set rocket position and make it visible
                rocket.style.left = `${startX - 10}px`;
                rocket.style.top = `${startY - 40}px`;
                rocket.style.display = 'block';
                
                // Calculate control point for bezier curve (creates arc)
                const controlX = (startX + targetX) / 2;
                const controlY = Math.min(startY, targetY) - 150;
                
                // Animate rocket along bezier curve
                let startTime = null;
                const duration = 1500; // ms
                
                function animateRocket(timestamp) {
                    if (!startTime) startTime = timestamp;
                    const elapsed = timestamp - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    
                    // Bezier curve calculation
                    const x = 
                        Math.pow(1 - progress, 2) * startX + 
                        2 * (1 - progress) * progress * controlX + 
                        Math.pow(progress, 2) * targetX;
                    
                    const y = 
                        Math.pow(1 - progress, 2) * startY + 
                        2 * (1 - progress) * progress * controlY + 
                        Math.pow(progress, 2) * targetY;
                    
                    // Update rocket position
                    rocket.style.left = `${x - 10}px`;
                    rocket.style.top = `${y - 40}px`;
                    
                    // Rotate rocket to follow trajectory
                    const angle = Math.atan2(
                        (Math.pow(1 - progress, 1) * (controlY - startY) + progress * (targetY - controlY)),
                        (Math.pow(1 - progress, 1) * (controlX - startX) + progress * (targetX - controlX))
                    );
                    rocket.style.transform = `rotate(${angle}rad)`;
                    
                    if (progress < 1) {
                        requestAnimationFrame(animateRocket);
                    } else {
                        // Rocket reached target
                        rocket.style.display = 'none';
                        checkHit(targetX, targetY, targetArea);
                    }
                }
                
                requestAnimationFrame(animateRocket);
            }

            // Check if rocket hit a target
            function checkHit(x, y, targetArea) {
                // Get all potential targets in the area
                const targets = targetArea.querySelectorAll('.base, .monster, .zombie');
                let hit = false;
                
                targets.forEach(target => {
                    if(target.style.visibility === 'hidden') return;
                    
                    const rect = target.getBoundingClientRect();
                    const areaRect = targetArea.getBoundingClientRect();
                    
                    // Convert target position relative to the area
                    const targetX = rect.left - areaRect.left + rect.width / 2;
                    const targetY = rect.top - areaRect.top + rect.height / 2;
                    
                    // Calculate distance between rocket impact and target center
                    const distance = Math.sqrt(Math.pow(x - targetX, 2) + Math.pow(y - targetY, 2));
                    
                    // If within hit radius
                    if(distance < 50) {
                        hit = true;
                        destroyTarget(target);
                    }
                });
                
                if(!hit) {
                    questionText.textContent = "Miss! The rocket didn't hit anything.";
                }
                
                // Switch turns after a delay
                setTimeout(() => {
                    if(gameState.gameActive) {
                        gameState.currentPlayer = gameState.currentPlayer === 1 ? 2 : 1;
                        displayQuestion();
                    }
                }, 2000);
            }

            // Destroy a target
            function destroyTarget(target) {
                // Create explosion effect
                const explosion = document.createElement('div');
                explosion.className = 'explosion';
                const rect = target.getBoundingClientRect();
                const areaRect = target.parentElement.getBoundingClientRect();
                
                explosion.style.left = `${rect.left - areaRect.left - 40}px`;
                explosion.style.top = `${rect.top - areaRect.top - 40}px`;
                target.parentElement.appendChild(explosion);
                
                // Animate explosion
                explosion.style.animation = 'explode 0.5s forwards';
                
                // Hide target after a delay
                setTimeout(() => {
                    target.style.visibility = 'hidden';
                    explosion.remove();
                    
                    // Update game state
                    const targetId = target.id;
                    const player = targetId.includes('player1') ? 'player1' : 'player2';
                    
                    if(targetId.includes('base')) {
                        gameState[player].base = false;
                        questionText.textContent = "Direct hit! Base destroyed!";
                    } else if(targetId.includes('monster')) {
                        gameState[player].monster = false;
                        questionText.textContent = "Direct hit! Monster destroyed!";
                    } else if(targetId.includes('zombie')) {
                        const zombieIndex = parseInt(targetId.slice(-1)) - 1;
                        gameState[player].zombies[zombieIndex] = false;
                        questionText.textContent = "Direct hit! Zombie destroyed!";
                    }
                    
                    // Check for win condition
                    checkWinCondition();
                }, 500);
            }

            // Check if a player has won
            function checkWinCondition() {
                const player1Destroyed = !gameState.player1.base && 
                                        !gameState.player1.monster && 
                                        gameState.player1.zombies.every(z => !z);
                
                const player2Destroyed = !gameState.player2.base && 
                                        !gameState.player2.monster && 
                                        gameState.player2.zombies.every(z => !z);
                
                if(player1Destroyed || player2Destroyed) {
                    gameState.gameActive = false;
                    
                    if(player1Destroyed && player2Destroyed) {
                        gameOverMessage.textContent = "It's a tie! Both bases were destroyed!";
                    } else if(player1Destroyed) {
                        gameOverMessage.textContent = "Player 2 wins!";
                    } else {
                        gameOverMessage.textContent = "Player 1 wins!";
                    }
                    
                    gameOver.style.display = 'flex';
                }
            }

            // Start a new game
            function newGame() {
                // Reset game state
                gameState.currentPlayer = 1;
                gameState.player1.rockets = 0;
                gameState.player1.base = true;
                gameState.player1.monster = true;
                gameState.player1.zombies = [true, true, true];
                
                gameState.player2.rockets = 0;
                gameState.player2.base = true;
                gameState.player2.monster = true;
                gameState.player2.zombies = [true, true, true];
                
                gameState.gameActive = true;
                gameState.canFire = false;
                
                // Update UI
                player1Rockets.textContent = '0';
                player2Rockets.textContent = '0';
                
                // Show all targets
                document.querySelectorAll('.base, .monster, .zombie').forEach(target => {
                    target.style.visibility = 'visible';
                });
                
                // Hide game over screen
                gameOver.style.display = 'none';
                
                // Start with a question
                displayQuestion();
                
                // Disable fire button
                fireBtn.disabled = true;
            }

            // Event listeners
            fireBtn.addEventListener('click', fireRocket);
            newGameBtn.addEventListener('click', newGame);
            restartBtn.addEventListener('click', newGame);

            // Start the game
            newGame();
        });
    </script>
</body>
</html>